<div class="page">
  <h1 class="page__title">Support</h1>
  <p class="page__subtitle">if you have any problem contact us</p>

  <div class="grid">
    <!-- Left: Contact Form -->
    <section class="card form-card" aria-labelledby="form-title">
      <div class="card__header card__header--row">
        <h2 id="form-title" class="card__title">COMPLETE THE FORM</h2>
      </div>

      <form class="support-form" (submit)="$event.preventDefault(); onSubmit()">
        <label class="form__label">enter an email:</label>
        <input
          class="form__input"
          type="email"
          placeholder="name@example.com"
          [value]="form().email"
          (input)="update('email', $any($event.target).value)"
        />

        <label class="form__label">enter your name:</label>
        <input
          class="form__input"
          type="text"
          placeholder="Your name"
          [value]="form().name"
          (input)="update('name', $any($event.target).value)"
        />

        <label class="form__label">enter a subject:</label>
        <input
          class="form__input"
          type="text"
          placeholder="Subject"
          [value]="form().subject"
          (input)="update('subject', $any($event.target).value)"
        />

        <label class="form__label">describe the problem:</label>
        <textarea
          class="form__textarea"
          rows="6"
          placeholder="Explain the issue..."
          [value]="form().description"
          (input)="update('description', $any($event.target).value)"
        ></textarea>

        <div class="form__actions">
          <button
            class="btn btn--pill"
            type="submit"
            [disabled]="!canSubmit() || loading()"
          >
            {{ loading() ? 'sending…' : 'send' }}
          </button>
        </div>
      </form>
    </section>

    <!-- Right: Tickets List -->
    <aside class="card tickets-card" aria-labelledby="tickets-title">
      <div class="card__header card__header--row">
        <h2 id="tickets-title" class="card__title">YOUR TICKETS</h2>
        <div class="card__icon">⤢</div>
      </div>

      <ul class="tickets__list">
        <li class="ticket__item" *ngFor="let ticket of tickets">
          <p class="ticket__subject">
            <strong>Subject:</strong> {{ ticket.subject }}
          </p>

          <p class="ticket__status-row">
            <span class="ticket__status-label">Status:</span>

            <span
              class="status-chip status-chip--open"
              [class.status-chip--active]="ticket.status === 'OPEN'"
            >
              OPEN
            </span>
            <span class="status__separator">--</span>

            <span
              class="status-chip status-chip--in-progress"
              [class.status-chip--active]="ticket.status === 'IN_PROGRESS'"
            >
              IN PROGRESS
            </span>
            <span class="status__separator">--</span>

            <span
              class="status-chip status-chip--resolved"
              [class.status-chip--active]="ticket.status === 'RESOLVED'"
            >
              RESOLVED
            </span>
            <span class="status__separator">--</span>

            <span
              class="status-chip status-chip--closed"
              [class.status-chip--active]="ticket.status === 'CLOSED'"
            >
              CLOSED
            </span>
          </p>


          <p class="ticket__answer-label"><strong>Answer:</strong></p>
          <div class="ticket__answer">
            {{ ticketAnswer(ticket) }}
          </div>
        </li>
      </ul>
    </aside>


  </div>
</div>
